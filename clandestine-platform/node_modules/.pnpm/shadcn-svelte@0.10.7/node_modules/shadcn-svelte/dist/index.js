#!/usr/bin/env node
var ar=Object.create;var qt=Object.defineProperty;var or=Object.getOwnPropertyDescriptor;var cr=Object.getOwnPropertyNames;var lr=Object.getPrototypeOf,ur=Object.prototype.hasOwnProperty;var Wt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var pr=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of cr(t))!ur.call(e,n)&&n!==r&&qt(e,n,{get:()=>t[n],enumerable:!(s=or(t,n))||s.enumerable});return e};var zt=(e,t,r)=>(r=e!=null?ar(lr(e)):{},pr(t||!e||!e.__esModule?qt(r,"default",{value:e,enumerable:!0}):r,e));var ps=Wt((Li,us)=>{"use strict";var xt="\x1B",A=`${xt}[`,Kr="\x07",bt={to(e,t){return t?`${A}${t+1};${e+1}H`:`${A}${e+1}G`},move(e,t){let r="";return e<0?r+=`${A}${-e}D`:e>0&&(r+=`${A}${e}C`),t<0?r+=`${A}${-t}A`:t>0&&(r+=`${A}${t}B`),r},up:(e=1)=>`${A}${e}A`,down:(e=1)=>`${A}${e}B`,forward:(e=1)=>`${A}${e}C`,backward:(e=1)=>`${A}${e}D`,nextLine:(e=1)=>`${A}E`.repeat(e),prevLine:(e=1)=>`${A}F`.repeat(e),left:`${A}G`,hide:`${A}?25l`,show:`${A}?25h`,save:`${xt}7`,restore:`${xt}8`},Jr={up:(e=1)=>`${A}S`.repeat(e),down:(e=1)=>`${A}T`.repeat(e)},Hr={screen:`${A}2J`,up:(e=1)=>`${A}1J`.repeat(e),down:(e=1)=>`${A}J`.repeat(e),line:`${A}2K`,lineEnd:`${A}K`,lineStart:`${A}1K`,lines(e){let t="";for(let r=0;r<e;r++)t+=this.line+(r<e-1?bt.up():"");return e&&(t+=bt.left),t}};us.exports={cursor:bt,scroll:Jr,erase:Hr,beep:Kr}});var Hs=Wt((Ua,Js)=>{"use strict";function Us(e){return Array.isArray(e)?e:[e]}var Nt="",Gs=" ",Rt="\\",qn=/^\s+$/,Wn=/(?:[^\\]|^)\\$/,zn=/^\\!/,Xn=/^\\#/,Kn=/\r?\n/g,Jn=/^\.*\/|^\.+$/,Lt="/",zs="node-ignore";typeof Symbol<"u"&&(zs=Symbol.for("node-ignore"));var qs=zs,Hn=(e,t,r)=>Object.defineProperty(e,t,{value:r}),Yn=/([0-z])-([0-z])/g,Xs=()=>!1,Zn=e=>e.replace(Yn,(t,r,s)=>r.charCodeAt(0)<=s.charCodeAt(0)?t:Nt),Qn=e=>{let{length:t}=e;return e.slice(0,t-t%2)},ei=[[/^\uFEFF/,()=>Nt],[/\\?\s+$/,e=>e.indexOf("\\")===0?Gs:Nt],[/\\\s/g,()=>Gs],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,r)=>t+6<r.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,r)=>{let s=r.replace(/\\\*/g,"[^\\/]*");return t+s}],[/\\\\\\(?=[$.|*+(){^])/g,()=>Rt],[/\\\\/g,()=>Rt],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,r,s,n)=>t===Rt?`\\[${r}${Qn(s)}${n}`:n==="]"&&s.length%2===0?`[${Zn(r)}${s}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],Ws=Object.create(null),ti=(e,t)=>{let r=Ws[e];return r||(r=ei.reduce((s,n)=>s.replace(n[0],n[1].bind(e)),e),Ws[e]=r),t?new RegExp(r,"i"):new RegExp(r)},Vt=e=>typeof e=="string",si=e=>e&&Vt(e)&&!qn.test(e)&&!Wn.test(e)&&e.indexOf("#")!==0,ri=e=>e.split(Kn),Dt=class{constructor(t,r,s,n){this.origin=t,this.pattern=r,this.negative=s,this.regex=n}},ni=(e,t)=>{let r=e,s=!1;e.indexOf("!")===0&&(s=!0,e=e.substr(1)),e=e.replace(zn,"!").replace(Xn,"#");let n=ti(e,t);return new Dt(r,e,s,n)},ii=(e,t)=>{throw new t(e)},K=(e,t,r)=>Vt(e)?e?K.isNotRelative(e)?r(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:r("path must not be empty",TypeError):r(`path must be a string, but got \`${t}\``,TypeError),Ks=e=>Jn.test(e);K.isNotRelative=Ks;K.convert=e=>e;var Ft=class{constructor({ignorecase:t=!0,ignoreCase:r=t,allowRelativePaths:s=!1}={}){Hn(this,qs,!0),this._rules=[],this._ignoreCase=r,this._allowRelativePaths=s,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[qs]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(si(t)){let r=ni(t,this._ignoreCase);this._added=!0,this._rules.push(r)}}add(t){return this._added=!1,Us(Vt(t)?ri(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,r){let s=!1,n=!1;return this._rules.forEach(i=>{let{negative:a}=i;if(n===a&&s!==n||a&&!s&&!n&&!r)return;i.regex.test(t)&&(s=!a,n=a)}),{ignored:s,unignored:n}}_test(t,r,s,n){let i=t&&K.convert(t);return K(i,t,this._allowRelativePaths?Xs:ii),this._t(i,r,s,n)}_t(t,r,s,n){if(t in r)return r[t];if(n||(n=t.split(Lt)),n.pop(),!n.length)return r[t]=this._testOne(t,s);let i=this._t(n.join(Lt)+Lt,r,s,n);return r[t]=i.ignored?i:this._testOne(t,s)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return Us(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},it=e=>new Ft(e),ai=e=>K(e&&K.convert(e),e,Xs);it.isPathValid=ai;it.default=it;Js.exports=it;if(typeof process<"u"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let e=r=>/^\\\\\?\\/.test(r)||/["<>|\u0000-\u001F]+/u.test(r)?r:r.replace(/\\/g,"/");K.convert=e;let t=/^[a-z]:\//i;K.isNotRelative=r=>t.test(r)||Ks(r)}});import ke from"process";import{Command as xi}from"commander";import{existsSync as st,promises as jt}from"fs";import ne from"path";import ee from"process";import V from"chalk";import{Command as Dn}from"commander";import{execa as Fn}from"execa";var fr=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}},Ei=Symbol("brand");function se(e,t){return Array.isArray(e)?[void 0,e]:[e,t]}var Fe;function dr(e){return{lang:e?.lang??Fe?.lang,message:e?.message,abortEarly:e?.abortEarly??Fe?.abortEarly,abortPipeEarly:e?.abortPipeEarly??Fe?.abortPipeEarly,skipPipe:e?.skipPipe??Fe?.skipPipe}}var mr;function yr(e){return mr?.get(e)}var hr;function gr(e){return hr?.get(e)}var vr;function $r(e,t){return vr?.get(e)?.get(t)}function Xt(e,t,r,s,n){let i=t.message??$r(r,n.lang)??(e?gr(n.lang):null)??s?.message??yr(n.lang)??n.message;return typeof i=="function"?i(n):i}function ae(e,t,r){return{typed:e,output:t,issues:r}}function ct(e){let t=typeof e;return t==="object"&&(t=e?Object.getPrototypeOf(e).constructor.name:"null"),t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t}function xr(e,t,r){let s=r.received??ct(r.input),n={reason:e.type,context:r.context.type,expected:r.context.expects,received:s,message:`Invalid ${r.label}: ${r.context.expects?`Expected ${r.context.expects} but r`:"R"}eceived ${s}`,input:r.input,requirement:r.context.requirement,path:r.path,lang:t?.lang,abortEarly:t?.abortEarly,abortPipeEarly:t?.abortPipeEarly,skipPipe:t?.skipPipe};return n.message=Xt(!1,r.context,r.reference,t,n),n}function oe(e,t,r,s){if(e.pipe&&!r?.skipPipe)for(let n of e.pipe){let i=n._parse(t);if(i.issues){for(let a of i.issues){let l=xr(e,r,a);s?s.push(l):s=[l]}if(r?.abortEarly||r?.abortPipeEarly)break}else t=i.output}return ae(!0,t,s)}function Kt(e,t,r){if(!e||typeof e=="object"&&!Array.isArray(e)){let[i,a]=se(t,r);return[e,i,a]}let[s,n]=se(e,t);return[void 0,s,n]}function ce(e,t,r,s,n){let i=ct(r),a=n?.expected??e.expects,l={reason:n?.reason??"type",context:e.type,expected:a,received:i,message:`Invalid type: Expected ${a} but received ${i}`,input:r,path:n?.path,issues:n?.issues,lang:s?.lang,abortEarly:s?.abortEarly,abortPipeEarly:s?.abortPipeEarly,skipPipe:s?.skipPipe};return l.message=Xt(!0,e,t,s,l),{typed:!1,output:r,issues:[l]}}function br(e){return typeof e.default=="function"?e.default():e.default}function M(e,t,r){let[s,n]=se(t,r);return{type:"array",expects:"Array",async:!1,item:e,message:s,pipe:n,_parse(i,a){if(Array.isArray(i)){let l=!0,c,m=[];for(let v=0;v<i.length;v++){let p=i[v],$=this.item._parse(p,a);if($.issues){let f={type:"array",origin:"value",input:i,key:v,value:p};for(let u of $.issues)u.path?u.path.unshift(f):u.path=[f],c?.push(u);if(c||(c=$.issues),a?.abortEarly){l=!1;break}}$.typed||(l=!1),m.push($.output)}return l?oe(this,m,a,c):ae(!1,m,c)}return ce(this,M,i,a)}}}function B(e,t){let[r,s]=se(e,t);return{type:"boolean",expects:"boolean",async:!1,message:r,pipe:s,_parse(n,i){return typeof n=="boolean"?oe(this,n,i):ce(this,B,n,i)}}}function O(e,t,r,s){let[n,i,a]=Kt(t,r,s),l;return{type:"object",expects:"Object",async:!1,entries:e,rest:n,message:i,pipe:a,_parse(c,m){if(c&&typeof c=="object"){l=l??Object.entries(this.entries);let v=!0,p,$={};for(let[f,u]of l){let d=c[f],h=u._parse(d,m);if(h.issues){let k={type:"object",origin:"value",input:c,key:f,value:d};for(let C of h.issues)C.path?C.path.unshift(k):C.path=[k],p?.push(C);if(p||(p=h.issues),m?.abortEarly){v=!1;break}}h.typed||(v=!1),(h.output!==void 0||f in c)&&($[f]=h.output)}if(this.rest&&!(m?.abortEarly&&p)){for(let f in c)if(!(f in this.entries)){let u=c[f],d=this.rest._parse(u,m);if(d.issues){let h={type:"object",origin:"value",input:c,key:f,value:u};for(let k of d.issues)k.path?k.path.unshift(h):k.path=[h],p?.push(k);if(p||(p=d.issues),m?.abortEarly){v=!1;break}}d.typed||(v=!1),$[f]=d.output}}return v?oe(this,$,m,p):ae(!1,$,p)}return ce(this,O,c,m)}}}function W(e,t){return{type:"optional",expects:`${e.expects} | undefined`,async:!1,wrapped:e,default:t,_parse(r,s){if(r===void 0){let n=br(this);if(n===void 0)return ae(!0,r);r=n}return this.wrapped._parse(r,s)}}}function lt(e,t){return{type:"picklist",expects:e.map(ct).join(" | "),async:!1,options:e,message:t,_parse(r,s){return this.options.includes(r)?ae(!0,r):ce(this,lt,r,s)}}}function x(e,t){let[r,s]=se(e,t);return{type:"string",expects:"string",async:!1,message:r,pipe:s,_parse(n,i){return typeof n=="string"?oe(this,n,i):ce(this,x,n,i)}}}function _r(e,t,r,s){if(typeof t=="object"&&!Array.isArray(t)){let[a,l]=se(r,s);return[e,t,a,l]}let[n,i]=se(t,r);return[x(),e,n,i]}var wr=["__proto__","prototype","constructor"];function le(e,t,r,s){let[n,i,a,l]=_r(e,t,r,s);return{type:"record",expects:"Object",async:!1,key:n,value:i,message:a,pipe:l,_parse(c,m){if(c&&typeof c=="object"){let v=!0,p,$={};for(let[f,u]of Object.entries(c))if(!wr.includes(f)){let d,h=this.key._parse(f,m);if(h.issues){d={type:"record",origin:"key",input:c,key:f,value:u};for(let C of h.issues)C.path=[d],p?.push(C);if(p||(p=h.issues),m?.abortEarly){v=!1;break}}let k=this.value._parse(u,m);if(k.issues){d=d??{type:"record",origin:"value",input:c,key:f,value:u};for(let C of k.issues)C.path?C.path.unshift(d):C.path=[d],p?.push(C);if(p||(p=k.issues),m?.abortEarly){v=!1;break}}(!h.typed||!k.typed)&&(v=!1),h.typed&&($[h.output]=k.output)}return v?oe(this,$,m,p):ae(!1,$,p)}return ce(this,le,c,m)}}}function Ve(e,t,r,s){let[n,i,a]=Kt(t,r,s);return O(e.reduce((l,c)=>({...l,...c.entries}),{}),n,i,a)}function D(e,t,r){let s=e._parse(t,dr(r));if(s.issues)throw new fr(s.issues);return s.output}function ut(e,t,r){return{...e,_parse(s,n){let i=e._parse(s,n);if(i.issues)i.typed=!1;else if(i.output=t(i.output,{issues:i.issues}),r)return Array.isArray(r)?oe({type:typeof i.output,pipe:r},i.output,n):r._parse(i.output,n);return i}}}import Cn from"fs";import He from"path";import Ie from"chalk";import _ from"path";import Qt from"fs";import Pr from"module";var Jt=e=>e!==null&&typeof e=="object",pe=(e,t)=>Object.assign(new Error(`[${e}]: ${t}`),{code:e}),Ht="ERR_INVALID_PACKAGE_CONFIG",pt="ERR_INVALID_PACKAGE_TARGET",Er="ERR_PACKAGE_PATH_NOT_EXPORTED";var kr=/^\d+$/,Cr=/^(\.{1,2}|node_modules)$/i,Ar=/\/|\\/,Yt=(e=>(e.Export="exports",e.Import="imports",e))(Yt||{}),ft=(e,t,r,s,n)=>{if(t==null)return[];if(typeof t=="string"){let[i,...a]=t.split(Ar);if(i===".."||a.some(l=>Cr.test(l)))throw pe(pt,`Invalid "${e}" target "${t}" defined in the package config`);return[n?t.replace(/\*/g,n):t]}if(Array.isArray(t))return t.flatMap(i=>ft(e,i,r,s,n));if(Jt(t)){for(let i of Object.keys(t)){if(kr.test(i))throw pe(Ht,"Cannot contain numeric property keys");if(i==="default"||s.includes(i))return ft(e,t[i],r,s,n)}return[]}throw pe(pt,`Invalid "${e}" target "${t}"`)},Ce="*",Tr=(e,t)=>{let r=e.indexOf(Ce),s=t.indexOf(Ce);return r===s?t.length>e.length:s>r};function Sr(e,t){if(!t.includes(Ce)&&e.hasOwnProperty(t))return[t];let r,s;for(let n of Object.keys(e))if(n.includes(Ce)){let[i,a,l]=n.split(Ce);if(l===void 0&&t.startsWith(i)&&t.endsWith(a)){let c=t.slice(i.length,-a.length||void 0);c&&(!r||Tr(r,n))&&(r=n,s=c)}}return[r,s]}var Or=e=>Object.keys(e).reduce((t,r)=>{let s=r===""||r[0]!==".";if(t===void 0||t===s)return s;throw pe(Ht,'"exports" cannot contain some keys starting with "." and some not')},void 0),Ir=/^\w+:/,Zt=(e,t,r)=>{if(!e)throw new Error('"exports" is required');t=t===""?".":`./${t}`,(typeof e=="string"||Array.isArray(e)||Jt(e)&&Or(e))&&(e={".":e});let[s,n]=Sr(e,t),i=ft(Yt.Export,e[s],t,r,n);if(i.length===0)throw pe(Er,t==="."?'No "exports" main defined':`Package subpath '${t}' is not defined by "exports"`);for(let a of i)if(!a.startsWith("./")&&!Ir.test(a))throw pe(pt,`Invalid "exports" target "${a}" defined in the package config`);return i};function G(e){return e.startsWith("\\\\?\\")?e:e.replace(/\\/g,"/")}var Ue=e=>{let t=Qt[e];return(r,...s)=>{let n=`${e}:${s.join(":")}`,i=r?.get(n);return i===void 0&&(i=Reflect.apply(t,Qt,s),r?.set(n,i)),i}},U=Ue("existsSync"),jr=Ue("realpathSync"),Rr=Ue("readFileSync"),Me=Ue("statSync"),is=(e,t,r)=>{for(;;){let s=_.posix.join(e,t);if(U(r,s))return s;let n=_.dirname(e);if(n===e)return;e=n}},$t=/^\.{1,2}(\/.*)?$/,dt=e=>{let t=G(e);return $t.test(t)?t:`./${t}`};function Lr(e,t=!1){let r=e.length,s=0,n="",i=0,a=16,l=0,c=0,m=0,v=0,p=0;function $(y,w){let g=0,P=0;for(;g<y||!w;){let N=e.charCodeAt(s);if(N>=48&&N<=57)P=P*16+N-48;else if(N>=65&&N<=70)P=P*16+N-65+10;else if(N>=97&&N<=102)P=P*16+N-97+10;else break;s++,g++}return g<y&&(P=-1),P}function f(y){s=y,n="",i=0,a=16,p=0}function u(){let y=s;if(e.charCodeAt(s)===48)s++;else for(s++;s<e.length&&fe(e.charCodeAt(s));)s++;if(s<e.length&&e.charCodeAt(s)===46)if(s++,s<e.length&&fe(e.charCodeAt(s)))for(s++;s<e.length&&fe(e.charCodeAt(s));)s++;else return p=3,e.substring(y,s);let w=s;if(s<e.length&&(e.charCodeAt(s)===69||e.charCodeAt(s)===101))if(s++,(s<e.length&&e.charCodeAt(s)===43||e.charCodeAt(s)===45)&&s++,s<e.length&&fe(e.charCodeAt(s))){for(s++;s<e.length&&fe(e.charCodeAt(s));)s++;w=s}else p=3;return e.substring(y,w)}function d(){let y="",w=s;for(;;){if(s>=r){y+=e.substring(w,s),p=2;break}let g=e.charCodeAt(s);if(g===34){y+=e.substring(w,s),s++;break}if(g===92){if(y+=e.substring(w,s),s++,s>=r){p=2;break}switch(e.charCodeAt(s++)){case 34:y+='"';break;case 92:y+="\\";break;case 47:y+="/";break;case 98:y+="\b";break;case 102:y+="\f";break;case 110:y+=`
`;break;case 114:y+="\r";break;case 116:y+="	";break;case 117:let P=$(4,!0);P>=0?y+=String.fromCharCode(P):p=4;break;default:p=5}w=s;continue}if(g>=0&&g<=31)if(Ae(g)){y+=e.substring(w,s),p=2;break}else p=6;s++}return y}function h(){if(n="",p=0,i=s,c=l,v=m,s>=r)return i=r,a=17;let y=e.charCodeAt(s);if(mt(y)){do s++,n+=String.fromCharCode(y),y=e.charCodeAt(s);while(mt(y));return a=15}if(Ae(y))return s++,n+=String.fromCharCode(y),y===13&&e.charCodeAt(s)===10&&(s++,n+=`
`),l++,m=s,a=14;switch(y){case 123:return s++,a=1;case 125:return s++,a=2;case 91:return s++,a=3;case 93:return s++,a=4;case 58:return s++,a=6;case 44:return s++,a=5;case 34:return s++,n=d(),a=10;case 47:let w=s-1;if(e.charCodeAt(s+1)===47){for(s+=2;s<r&&!Ae(e.charCodeAt(s));)s++;return n=e.substring(w,s),a=12}if(e.charCodeAt(s+1)===42){s+=2;let g=r-1,P=!1;for(;s<g;){let N=e.charCodeAt(s);if(N===42&&e.charCodeAt(s+1)===47){s+=2,P=!0;break}s++,Ae(N)&&(N===13&&e.charCodeAt(s)===10&&s++,l++,m=s)}return P||(s++,p=1),n=e.substring(w,s),a=13}return n+=String.fromCharCode(y),s++,a=16;case 45:if(n+=String.fromCharCode(y),s++,s===r||!fe(e.charCodeAt(s)))return a=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return n+=u(),a=11;default:for(;s<r&&k(y);)s++,y=e.charCodeAt(s);if(i!==s){switch(n=e.substring(i,s),n){case"true":return a=8;case"false":return a=9;case"null":return a=7}return a=16}return n+=String.fromCharCode(y),s++,a=16}}function k(y){if(mt(y)||Ae(y))return!1;switch(y){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function C(){let y;do y=h();while(y>=12&&y<=15);return y}return{setPosition:f,getPosition:()=>s,scan:t?C:h,getToken:()=>a,getTokenValue:()=>n,getTokenOffset:()=>i,getTokenLength:()=>s-i,getTokenStartLine:()=>c,getTokenStartCharacter:()=>i-v,getTokenError:()=>p}}function mt(e){return e===32||e===9}function Ae(e){return e===10||e===13}function fe(e){return e>=48&&e<=57}var es;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(es||(es={}));var Be;(function(e){e.DEFAULT={allowTrailingComma:!1}})(Be||(Be={}));function Nr(e,t=[],r=Be.DEFAULT){let s=null,n=[],i=[];function a(l){Array.isArray(n)?n.push(l):s!==null&&(n[s]=l)}return Dr(e,{onObjectBegin:()=>{let l={};a(l),i.push(n),n=l,s=null},onObjectProperty:l=>{s=l},onObjectEnd:()=>{n=i.pop()},onArrayBegin:()=>{let l=[];a(l),i.push(n),n=l,s=null},onArrayEnd:()=>{n=i.pop()},onLiteralValue:a,onError:(l,c,m)=>{t.push({error:l,offset:c,length:m})}},r),n[0]}function Dr(e,t,r=Be.DEFAULT){let s=Lr(e,!1),n=[];function i(E){return E?()=>E(s.getTokenOffset(),s.getTokenLength(),s.getTokenStartLine(),s.getTokenStartCharacter()):()=>!0}function a(E){return E?()=>E(s.getTokenOffset(),s.getTokenLength(),s.getTokenStartLine(),s.getTokenStartCharacter(),()=>n.slice()):()=>!0}function l(E){return E?j=>E(j,s.getTokenOffset(),s.getTokenLength(),s.getTokenStartLine(),s.getTokenStartCharacter()):()=>!0}function c(E){return E?j=>E(j,s.getTokenOffset(),s.getTokenLength(),s.getTokenStartLine(),s.getTokenStartCharacter(),()=>n.slice()):()=>!0}let m=a(t.onObjectBegin),v=c(t.onObjectProperty),p=i(t.onObjectEnd),$=a(t.onArrayBegin),f=i(t.onArrayEnd),u=c(t.onLiteralValue),d=l(t.onSeparator),h=i(t.onComment),k=l(t.onError),C=r&&r.disallowComments,y=r&&r.allowTrailingComma;function w(){for(;;){let E=s.scan();switch(s.getTokenError()){case 4:g(14);break;case 5:g(15);break;case 3:g(13);break;case 1:C||g(11);break;case 2:g(12);break;case 6:g(16);break}switch(E){case 12:case 13:C?g(10):h();break;case 16:g(1);break;case 15:case 14:break;default:return E}}}function g(E,j=[],Gt=[]){if(k(E),j.length+Gt.length>0){let De=s.getToken();for(;De!==17;){if(j.indexOf(De)!==-1){w();break}else if(Gt.indexOf(De)!==-1)break;De=w()}}}function P(E){let j=s.getTokenValue();return E?u(j):(v(j),n.push(j)),w(),!0}function N(){switch(s.getToken()){case 11:let E=s.getTokenValue(),j=Number(E);isNaN(j)&&(g(2),j=0),u(j);break;case 7:u(null);break;case 8:u(!0);break;case 9:u(!1);break;default:return!1}return w(),!0}function rr(){return s.getToken()!==10?(g(3,[],[2,5]),!1):(P(!1),s.getToken()===6?(d(":"),w(),ot()||g(4,[],[2,5])):g(5,[],[2,5]),n.pop(),!0)}function nr(){m(),w();let E=!1;for(;s.getToken()!==2&&s.getToken()!==17;){if(s.getToken()===5){if(E||g(4,[],[]),d(","),w(),s.getToken()===2&&y)break}else E&&g(6,[],[]);rr()||g(4,[],[2,5]),E=!0}return p(),s.getToken()!==2?g(7,[2],[]):w(),!0}function ir(){$(),w();let E=!0,j=!1;for(;s.getToken()!==4&&s.getToken()!==17;){if(s.getToken()===5){if(j||g(4,[],[]),d(","),w(),s.getToken()===4&&y)break}else j&&g(6,[],[]);E?(n.push(0),E=!1):n[n.length-1]++,ot()||g(4,[],[4,5]),j=!0}return f(),E||n.pop(),s.getToken()!==4?g(8,[4],[]):w(),!0}function ot(){switch(s.getToken()){case 3:return ir();case 1:return nr();case 10:return P(!0);default:return N()}}return w(),s.getToken()===17?r.allowEmptyContent?!0:(g(4,[],[]),!1):ot()?(s.getToken()!==17&&g(9,[],[]),!0):(g(4,[],[]),!1)}var ts;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(ts||(ts={}));var ss;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(ss||(ss={}));var Fr=Nr,rs;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(rs||(rs={}));var as=(e,t)=>Fr(Rr(t,e,"utf8")),vt=Symbol("implicitBaseUrl"),Vr=()=>{let{findPnpApi:e}=Pr;return e&&e(process.cwd())},yt=(e,t,r,s)=>{let n=`resolveFromPackageJsonPath:${e}:${t}:${r}`;if(s!=null&&s.has(n))return s.get(n);let i=as(e,s);if(!i)return;let a=t||"tsconfig.json";if(!r&&i.exports)try{let[l]=Zt(i.exports,t,["require","types"]);a=l}catch{return!1}else!t&&i.tsconfig&&(a=i.tsconfig);return a=_.join(e,"..",a),s?.set(n,a),a},ht="package.json",gt="tsconfig.json",Mr=(e,t,r)=>{let s=e;if(e===".."&&(s=_.join(s,gt)),e[0]==="."&&(s=_.resolve(t,s)),_.isAbsolute(s)){if(U(r,s)){if(Me(r,s).isFile())return s}else if(!s.endsWith(".json")){let f=`${s}.json`;if(U(r,f))return f}return}let[n,...i]=e.split("/"),a=n[0]==="@"?`${n}/${i.shift()}`:n,l=i.join("/"),c=Vr();if(c){let{resolveRequest:f}=c;try{if(a===e){let u=f(_.join(a,ht),t);if(u){let d=yt(u,l,!1,r);if(d&&U(r,d))return d}}else{let u;try{u=f(e,t,{extensions:[".json"]})}catch{u=f(_.join(e,gt),t)}if(u)return u}}catch{}}let m=is(t,_.join("node_modules",a),r);if(!m||!Me(r,m).isDirectory())return;let v=_.join(m,ht);if(U(r,v)){let f=yt(v,l,!1,r);if(f===!1)return;if(f&&U(r,f)&&Me(r,f).isFile())return f}let p=_.join(m,l),$=p.endsWith(".json");if(!$){let f=`${p}.json`;if(U(r,f))return f}if(U(r,p)){if(Me(r,p).isDirectory()){let f=_.join(p,ht);if(U(r,f)){let d=yt(f,"",!0,r);if(d&&U(r,d))return d}let u=_.join(p,gt);if(U(r,u))return u}else if($)return p}},Br=(e,t,r,s)=>{let n=Mr(e,t,s);if(!n)throw new Error(`File '${e}' not found.`);if(r.has(n))throw new Error(`Circularity detected while resolving configuration: ${n}`);r.add(n);let i=_.dirname(n),a=os(n,s,r);delete a.references;let{compilerOptions:l}=a;if(l){let c=["baseUrl","outDir"];for(let m of c){let v=l[m];v&&(l[m]=G(_.relative(t,_.join(i,v)))||"./")}}return a.files&&(a.files=a.files.map(c=>G(_.relative(t,_.join(i,c))))),a.include&&(a.include=a.include.map(c=>G(_.relative(t,_.join(i,c))))),a.exclude&&(a.exclude=a.exclude.map(c=>G(_.relative(t,_.join(i,c))))),a},os=(e,t,r=new Set)=>{let s;try{s=jr(t,e)}catch{throw new Error(`Cannot resolve tsconfig at path: ${e}`)}let n=as(s,t)||{};if(typeof n!="object")throw new SyntaxError(`Failed to parse tsconfig at: ${e}`);let i=_.dirname(s);if(n.compilerOptions){let{compilerOptions:a}=n;a.paths&&!a.baseUrl&&(a[vt]=i)}if(n.extends){let a=Array.isArray(n.extends)?n.extends:[n.extends];delete n.extends;for(let l of a.reverse()){let c=Br(l,i,new Set(r),t),m={...c,...n,compilerOptions:{...c.compilerOptions,...n.compilerOptions}};c.watchOptions&&(m.watchOptions={...c.watchOptions,...n.watchOptions}),n=m}}if(n.compilerOptions){let{compilerOptions:a}=n,l=["baseUrl","rootDir"];for(let m of l){let v=a[m];if(v){let p=_.resolve(i,v),$=dt(_.relative(i,p));a[m]=$}}let{outDir:c}=a;c&&(Array.isArray(n.exclude)||(n.exclude=[]),n.exclude.includes(c)||n.exclude.push(c),a.outDir=dt(c))}else n.compilerOptions={};if(n.files&&(n.files=n.files.map(dt)),n.include&&(n.include=n.include.map(G)),n.watchOptions){let{watchOptions:a}=n;a.excludeDirectories&&(a.excludeDirectories=a.excludeDirectories.map(l=>G(_.resolve(i,l))))}return n},Ur=(e,t=new Map)=>os(e,t),cs=(e=process.cwd(),t="tsconfig.json",r=new Map)=>{let s=is(G(e),t,r);if(!s)return null;let n=Ur(s,r);return{path:s,config:n}},Gr=/\*/g,ns=(e,t)=>{let r=e.match(Gr);if(r&&r.length>1)throw new Error(t)},qr=e=>{if(e.includes("*")){let[t,r]=e.split("*");return{prefix:t,suffix:r}}return e},Wr=({prefix:e,suffix:t},r)=>r.startsWith(e)&&r.endsWith(t),zr=(e,t,r)=>Object.entries(e).map(([s,n])=>(ns(s,`Pattern '${s}' can have at most one '*' character.`),{pattern:qr(s),substitutions:n.map(i=>{if(ns(i,`Substitution '${i}' in pattern '${s}' can have at most one '*' character.`),!t&&!$t.test(i))throw new Error("Non-relative paths are not allowed when 'baseUrl' is not set. Did you forget a leading './'?");return _.resolve(r,i)})})),ls=e=>{if(!e.config.compilerOptions)return null;let{baseUrl:t,paths:r}=e.config.compilerOptions,s=vt in e.config.compilerOptions&&e.config.compilerOptions[vt];if(!t&&!r)return null;let n=_.resolve(_.dirname(e.path),t||s||"."),i=r?zr(r,t,n):[];return a=>{if($t.test(a))return[];let l=[];for(let p of i){if(p.pattern===a)return p.substitutions.map(G);typeof p.pattern!="string"&&l.push(p)}let c,m=-1;for(let p of l)Wr(p.pattern,a)&&p.pattern.prefix.length>m&&(m=p.pattern.prefix.length,c=p);if(!c)return t?[G(_.join(n,a))]:[];let v=a.slice(c.pattern.prefix.length,a.length-c.pattern.suffix.length);return c.substitutions.map(p=>G(p.replace("*",v)))}};var{join:Ii}=_.posix;var Xr=["node_modules","bower_components","jspm_packages"],Pi=`(?!(${Xr.join("|")})(/|$))`;var ji=process.platform==="win32";import ze from"process";var de=zt(ps(),1);import I from"process";import{ConfirmPrompt as Yr,GroupMultiSelectPrompt as Fi,MultiSelectPrompt as Zr,PasswordPrompt as Vi,SelectKeyPrompt as Mi,SelectPrompt as Qr,TextPrompt as en,block as tn,isCancel as sn}from"@clack/core";import rn from"is-unicode-supported";import o from"chalk";import{isCancel as z}from"@clack/core";var wt=rn(),S=(e,t)=>wt?e:t,nn=S("\u25C6","*"),ms=S("\u25A0","x"),ys=S("\u25B2","x"),Ge=S("\u25C7","o"),an=S("\u250C","T"),b=S("\u2502","|"),H=S("\u2514","\u2014"),Et=S("\u25CF",">"),kt=S("\u25CB"," "),on=S("\u25FB","[\u2022]"),fs=S("\u25FC","[+]"),cn=S("\u25FB","[ ]"),Gi=S("\u25AA","\u2022"),ds=S("\u2500","-"),ln=S("\u256E","+"),un=S("\u251C","+"),pn=S("\u256F","+"),fn=S("\u25CF","\u2022"),dn=S("\u25C6","*"),mn=S("\u25B2","!"),yn=S("\u25A0","x");function qe(e){switch(e){case"initial":case"active":return o.cyan(nn);case"cancel":return o.red(ms);case"error":return o.yellow(ys);case"submit":return o.green(Ge)}}function Ct(e){let{cursor:t,options:r,style:s}=e,n=e.maxItems===void 0?Number.POSITIVE_INFINITY:Math.max(e.maxItems,5),i=0;t>=i+n-3?i=Math.max(Math.min(t-n+3,r.length-n),0):t<i+2&&(i=Math.max(t-2,0));let a=n<r.length&&i>0,l=n<r.length&&i+n<r.length;return r.slice(i,i+n).map((c,m,v)=>{let p=m===0&&a,$=m===v.length-1&&l;return p||$?o.dim("..."):s(c,m+i===t)})}function Te(e){return new en({validate:e.validate,placeholder:e.placeholder,defaultValue:e.defaultValue,initialValue:e.initialValue,render(){let t=`${o.gray(b)}
${qe(this.state)}  ${e.message}
`,r=e.placeholder?o.inverse(e.placeholder[0])+o.dim(e.placeholder.slice(1)):o.inverse(o.hidden("_")),s=this.value?this.valueWithCursor:r;switch(this.state){case"error":return`${t.trim()}
${o.yellow(b)}  ${s}
${o.yellow(H)}  ${o.yellow(this.error)}
`;case"submit":return`${t}${o.gray(b)}  ${o.dim(this.value||e.placeholder)}`;case"cancel":return`${t}${o.gray(b)}  ${o.strikethrough(o.dim(this.value??""))}${this.value?.trim()?`
${o.gray(b)}`:""}`;default:return`${t}${o.cyan(b)}  ${s}
${o.cyan(H)}
`}}}).prompt()}function Y(e){let t=e.active??"Yes",r=e.inactive??"No";return new Yr({active:t,inactive:r,initialValue:e.initialValue??!0,render(){let s=`${o.gray(b)}
${qe(this.state)}  ${e.message}
`,n=this.value?t:r;switch(this.state){case"submit":return`${s}${o.gray(b)}  ${o.dim(n)}`;case"cancel":return`${s}${o.gray(b)}  ${o.strikethrough(o.dim(n))}
${o.gray(b)}`;default:return`${s}${o.cyan(b)}  ${this.value?`${o.green(Et)} ${t}`:`${o.dim(kt)} ${o.dim(t)}`} ${o.dim("/")} ${this.value?`${o.dim(kt)} ${o.dim(r)}`:`${o.green(Et)} ${r}`}
${o.cyan(H)}
`}}}).prompt()}function At(e){let t=(r,s)=>{let n=r.label??String(r.value);switch(s){case"selected":return`${o.dim(n)}`;case"active":return`${o.green(Et)} ${n} ${r.hint?o.dim(`(${r.hint})`):""}`;case"cancelled":return`${o.strikethrough(o.dim(n))}`;default:return`${o.dim(kt)} ${o.dim(n)}`}};return new Qr({options:e.options,initialValue:e.initialValue,render(){let r=`${o.gray(b)}
${qe(this.state)}  ${e.message}
`;switch(this.state){case"submit":return`${r}${o.gray(b)}  ${t(this.options[this.cursor],"selected")}`;case"cancel":return`${r}${o.gray(b)}  ${t(this.options[this.cursor],"cancelled")}
${o.gray(b)}`;default:return`${r}${o.cyan(b)}  ${Ct({cursor:this.cursor,options:this.options,maxItems:e.maxItems,style:(s,n)=>t(s,n?"active":"inactive")}).join(`
${o.cyan(b)}  `)}
${o.cyan(H)}
`}}}).prompt()}function We(e){let t=(r,s)=>{let n=r.label??String(r.value);return s==="active"?`${o.cyan(on)} ${n} ${r.hint?o.dim(`(${r.hint})`):""}`:s==="selected"?`${o.green(fs)} ${o.dim(n)}`:s==="cancelled"?`${o.strikethrough(o.dim(n))}`:s==="active-selected"?`${o.green(fs)} ${n} ${r.hint?o.dim(`(${r.hint})`):""}`:s==="submitted"?`${o.dim(n)}`:`${o.dim(cn)} ${o.dim(n)}`};return new Zr({options:e.options,initialValues:e.initialValues,required:e.required??!0,cursorAt:e.cursorAt,validate(r){if(this.required&&r.length===0)return`Please select at least one option.
${o.reset(o.dim(`Press ${o.gray(o.bgWhite(o.inverse(" space ")))} to select, ${o.gray(o.bgWhite(o.inverse(" enter ")))} to submit`))}`},render(){let r=`${o.gray(b)}
${qe(this.state)}  ${e.message}
`,s=(n,i)=>{let a=this.value.includes(n.value);return i&&a?t(n,"active-selected"):a?t(n,"selected"):t(n,i?"active":"inactive")};switch(this.state){case"submit":return`${r}${o.gray(b)}  ${this.options.filter(({value:n})=>this.value.includes(n)).map(n=>t(n,"submitted")).join(o.dim(", "))||o.dim("none")}`;case"cancel":{let n=this.options.filter(({value:i})=>this.value.includes(i)).map(i=>t(i,"cancelled")).join(o.dim(", "));return`${r}${o.gray(b)}  ${n.trim()?`${n}
${o.gray(b)}`:""}`}case"error":{let n=this.error.split(`
`).map((i,a)=>a===0?`${o.yellow(H)}  ${o.yellow(i)}`:`   ${i}`).join(`
`);return`${r+o.yellow(b)}  ${Ct({options:this.options,cursor:this.cursor,maxItems:e.maxItems,style:s}).join(`
${o.yellow(b)}  `)}
${n}
`}default:return`${r}${o.cyan(b)}  ${Ct({options:this.options,cursor:this.cursor,maxItems:e.maxItems,style:s}).join(`
${o.cyan(b)}  `)}
${o.cyan(H)}
`}}}).prompt()}var _t=e=>e.replace(gn(),"");function hs(e="",t=""){let r=`
${e}
`.split(`
`),s=_t(t).length,n=Math.max(r.reduce((a,l)=>(l=_t(l),l.length>a?l.length:a),0),s)+2,i=r.map(a=>`${o.gray(b)}  ${o.dim(a)}${" ".repeat(n-_t(a).length)}${o.gray(b)}`).join(`
`);I.stdout.write(`${o.gray(b)}
${o.green(Ge)}  ${o.reset(t)} ${o.gray(ds.repeat(Math.max(n-s-1,1))+ln)}
${i}
${o.gray(un+ds.repeat(n+2)+pn)}
`)}function R(e=""){I.stdout.write(`${o.gray(H)}  ${o.red(e)}

`)}function gs(e=""){I.stdout.write(`${o.gray(an)}  ${e}
`)}function me(e=""){I.stdout.write(`${o.gray(b)}
${o.gray(H)}  ${e}

`)}var T={message:(e="",{symbol:t=o.gray(b)}={})=>{let r=[`${o.gray(b)}`];if(e){let[s,...n]=e.split(`
`);r.push(`${t}  ${s}`,...n.map(i=>`${o.gray(b)}  ${i}`))}I.stdout.write(`${r.join(`
`)}
`)},info:e=>{T.message(e,{symbol:o.blue(fn)})},success:e=>{T.message(e,{symbol:o.green(dn)})},step:e=>{T.message(e,{symbol:o.green(Ge)})},warn:e=>{T.message(e,{symbol:o.yellow(mn)})},warning:e=>{T.warn(e)},error:e=>{T.message(e,{symbol:o.red(yn)})}};function hn(){let e=wt?["\u25D2","\u25D0","\u25D3","\u25D1"]:["\u2022","o","O","0"],t=wt?80:120,r,s,n=!1,i="";function a(u){let d=u>1?"Something went wrong":"Canceled";n&&$(d,u)}let l=()=>a(2),c=()=>a(1);function m(){I.on("uncaughtExceptionMonitor",l),I.on("unhandledRejection",l),I.on("SIGINT",c),I.on("SIGTERM",c)}function v(){I.removeListener("uncaughtExceptionMonitor",l),I.removeListener("unhandledRejection",l),I.removeListener("SIGINT",c),I.removeListener("SIGTERM",c)}function p(u=""){n=!0,r=tn(),i=u.replace(/\.+$/,""),I.stdout.write(`${o.gray(b)}
`);let d=0,h=0;m(),s=setInterval(()=>{let k=o.magenta(e[d]),C=".".repeat(Math.floor(h)).slice(0,3);I.stdout.write(de.cursor.move(-999,0)),I.stdout.write(de.erase.down(1)),I.stdout.write(`${k}  ${i}${C}`),d=d+1<e.length?d+1:0,h=h<e.length?h+.125:0},t)}function $(u="",d=0){i=u??i,n=!1,clearInterval(s);let h=d===0?o.green(Ge):d===1?o.red(ms):o.red(ys);I.stdout.write(de.cursor.move(-999,0)),I.stdout.write(de.erase.down(1)),I.stdout.write(`${h}  ${i}
`),v(),r()}return{start:p,stop:$,message:(u="")=>{i=u??i}}}function gn(){let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(e,"g")}async function vs(e,t){let r={},s=Object.keys(e);for(let n of s){let i=e[n],a=await i({results:r})?.catch(l=>{throw l});if(typeof t?.onCancel=="function"&&sn(a)){r[n]="canceled",t.onCancel({results:r});continue}r[n]=a}return r}async function ye(e){for(let t of e){if(t.enabled===!1)continue;let r=hn();r.start(t.title);let s=await t.task(r.message);r.stop(s||t.title)}}function he(e){T.message(),typeof e=="string"&&(R(e),ze.exit(1)),(e instanceof Xe||e instanceof Z)&&(R(`[${e.name}]: ${e.message}`),ze.exit(1)),e instanceof Error&&(R(e.stack),ze.exit(1)),R("Something went wrong. Please try again."),ze.exit(1)}function L(e){return new Xe(e)}var Xe=class extends Error{name="CLI Error"},Z=class extends Error{name="Config Error"};function Oe(e,t){let r=ls(t);return r===null?void 0:r(e)[0]}import{execa as En}from"execa";import $s from"fs";import xs from"path";import vn from"process";import{findUp as bs}from"find-up";async function Q(e){let t=await xn(e);if(t==="yarn@berry")return"yarn";if(t==="pnpm@6")return"pnpm";if(t!==null)return t;let r=vn.env.npm_config_user_agent;return r===void 0?"npm":r.startsWith("yarn")?"yarn":r.startsWith("pnpm")?"pnpm":"npm"}var $n=["npm","bun","pnpm","pnpm@6","yarn","yarn@berry"],_s={"bun.lockb":"bun","pnpm-lock.yaml":"pnpm","yarn.lock":"yarn","package-lock.json":"npm","npm-shrinkwrap.json":"npm"};async function xn(e){let t=null,r=await bs(Object.keys(_s),{cwd:e}),s;if(r?s=xs.resolve(r,"../package.json"):s=await bs("package.json",{cwd:e}),s&&$s.existsSync(s))try{let n=JSON.parse($s.readFileSync(s,"utf8"));if(typeof n.packageManager=="string"){let[i,a]=n.packageManager.replace(/^\^/,"").split("@");i==="yarn"&&Number.parseInt(a)>1?t="yarn@berry":i==="pnpm"&&Number.parseInt(a)<7?t="pnpm@6":$n.includes(i)&&(t=i)}}catch{}return!t&&r&&(t=_s[xs.basename(r)]),t}import ws from"path";import bn from"fs";import{fileURLToPath as _n}from"url";function Ke(){let e=wn("../package.json");return ks(e)}function wn(e){let t=_n(new URL(".",import.meta.url));return ws.resolve(t,e)}function Es(e){let t=ws.resolve(e,"package.json");return ks(t)}function ks(e){let t=bn.readFileSync(e,{encoding:"utf8"});return JSON.parse(t)}async function Je(e){if(kn(e)){let r=await Q(e);await En(r==="npm"?"npx":r,["svelte-kit","sync"],{cwd:e})}}function kn(e){let t=Es(e);return{...t.devDependencies,...t.dependencies}["@sveltejs/kit"]!==void 0}var Cs="default",Tt="$lib/components",St="$lib/utils",Ot="src/app.pcss",It="tailwind.config.cjs",As="slate",Ts=!0,re=(...e)=>Ie.bold.cyan(...e),Pe=O({$schema:W(x()),style:x(),tailwind:O({config:x(),css:x(),baseColor:x()}),aliases:O({components:ut(x(),e=>e.replace(/[\u{0080}-\u{FFFF}]/gu,"")),utils:ut(x(),e=>e.replace(/[\u{0080}-\u{FFFF}]/gu,""))}),typescript:W(B(),!0)}),An=Ve([Pe,O({resolvedPaths:O({tailwindConfig:x(),tailwindCss:x(),utils:x(),components:x()})})]);async function ge(e){let t=await Tn(e);return t?await Pt(e,t):null}async function Pt(e,t){await Je(e);let r=t.typescript?"tsconfig.json":"jsconfig.json",s=Ye(e,r);if(s===null)throw L(`Missing ${re("paths")} field in your ${re(r)} for path aliases. See: ${Ie.underline("https://www.shadcn-svelte.com/docs/installation/manual#configure-path-aliases")}`);let n=Oe(t.aliases.utils,s),i=Oe(t.aliases.components,s),a=(l,c)=>new Z(`Invalid import alias found: (${re(`"${l}": "${c}"`)}) in ${re("components.json")}.
   - Import aliases ${Ie.underline("must use")} existing path aliases defined in your ${re(r)} (e.g. "${l}": "$lib/${l}").
   - See: ${Ie.underline("https://www.shadcn-svelte.com/docs/installation/manual#configure-path-aliases")}.`);if(n===void 0)throw a("utils",t.aliases.utils);if(i===void 0)throw a("components",t.aliases.components);return D(An,{...t,resolvedPaths:{tailwindConfig:He.resolve(e,t.tailwind.config),tailwindCss:He.resolve(e,t.tailwind.css),utils:n,components:i}})}function Ye(e,t){let r=cs(He.resolve(e,"package.json"),t);if(r===null)throw L(`Failed to find ${re(t)}. See: ${Ie.underline("https://www.shadcn-svelte.com/docs/installation#opt-out-of-typescript")}`);return r}async function Tn(e){let t=He.resolve(e,"components.json");try{let r=await Cn.promises.readFile(t,{encoding:"utf8"}).catch(()=>null);if(!r)return null;let s=JSON.parse(r);return D(Pe,s)}catch{throw new Z(`Invalid configuration found in ${re(t)}.`)}}import On from"process";function ve(){let{env:e}=On;return e.HTTP_PROXY||e.http_proxy||e.HTTPS_PROXY||e.https_proxy||e.npm_config_proxy||e.npm_config_https_proxy}import jn from"path";import Rn from"process";import{fetch as Ln}from"node-fetch-native";import{createProxy as Nn}from"node-fetch-native/proxy";var Ss=O({name:x(),dependencies:M(x()),registryDependencies:M(x()),files:M(x()),type:lt(["components:ui","components:component","components:example"])}),Os=M(Ss),In=Ve([Ss,O({files:M(O({name:x(),content:x()}))})]),Is=M(In),Ps=M(O({name:x(),label:x()})),js=O({inlineColors:O({light:le(x(),x()),dark:le(x(),x())}),cssVars:O({light:le(x(),x()),dark:le(x(),x())}),inlineColorsTemplate:x(),cssVarsTemplate:x()});var Rs=Rn.env.COMPONENTS_REGISTRY_URL??"https://shadcn-svelte.com";async function Ze(){try{let[e]=await et(["index.json"]);return D(Os,e)}catch{throw L("Failed to fetch components from registry.")}}async function Ls(){try{let[e]=await et(["styles/index.json"]);return D(Ps,e)}catch{throw L("Failed to fetch styles from registry.")}}async function Ns(){return[{name:"slate",label:"Slate"},{name:"gray",label:"Gray"},{name:"zinc",label:"Zinc"},{name:"neutral",label:"Neutral"},{name:"stone",label:"Stone"}]}async function Ds(e){try{let[t]=await et([`colors/${e}.json`]);return D(js,t)}catch{throw L("Failed to fetch base color from registry.")}}async function je(e,t,r=!0){let s=[];for(let n of t){let i=e.find(a=>a.name===n);if(i&&(s.push(i),r&&i.registryDependencies)){let a=await je(e,i.registryDependencies);s.push(...a)}}return s.filter((n,i,a)=>a.findIndex(l=>l.name===n.name)===i)}async function Qe(e,t){try{let r=e.typescript?e.style:`${e.style}-js`,s=t.map(i=>`styles/${r}/${i.name}.json`),n=await et(s);return D(Is,n)}catch{throw L("Failed to fetch tree from registry.")}}function Re(e,t,r){if(r&&t.type!=="components:ui")return r;let[s,n]=t.type.split(":");return!s||!n||!(s in e.resolvedPaths)?null:jn.join(e.resolvedPaths[s],n)}async function et(e){let t=ve(),r=t?Nn({url:t}):{};try{return await Promise.all(e.map(async n=>await(await Ln(`${Rs}/registry/${n}`,{...r})).json()))}catch{throw L(`Failed to fetch registry from ${Rs}.`)}}function tt(e,t){let r=e.replace(/\$lib\/registry\/[^/]+/g,t.aliases.components);return r=r.replace(/\$lib\/utils/g,t.aliases.utils),r}import Fs from"chalk";function $e(){let e=Ke(),t=Fs.bgHex("#FF5500").black(" shadcn-svelte "),r=Fs.gray(` v${e.version} `);gs(t+r),(typeof Bun<"u"||typeof Deno<"u")&&T.warn("You are currently using an unsupported runtime. Only Node.js v18 or higher is officially supported. Continue at your own risk.")}function xe(e,t=9){return e.reduce((r,s,n)=>n%t===0?`${r},
${s}`:`${r}, ${s}`)}var X=(...e)=>V.bold.cyan(...e),Vn=O({components:W(M(x())),yes:B(),all:B(),overwrite:B(),cwd:x(),path:W(x()),nodep:B(),proxy:W(x())}),Vs=new Dn().command("add").description("add components to your project").argument("[components...]","name of components").option("--nodep","skips adding & installing package dependencies.",!1).option("-a, --all","install all components to your project.",!1).option("-y, --yes","skip confirmation prompt.",!1).option("-o, --overwrite","overwrite existing files.",!1).option("--proxy <proxy>","fetch components from registry using a proxy.",ve()).option("-c, --cwd <cwd>","the working directory. defaults to the current directory.",ee.cwd()).option("-p, --path <path>","the path to add the component to.").action(async(e,t)=>{try{$e();let r=D(Vn,{components:e,...t}),s=ne.resolve(r.cwd);if(!st(s))throw L(`The path ${V.cyan(s)} does not exist. Please try again.`);let n=await ge(s);if(!n)throw new Z(`Configuration file is missing. Please run ${V.green("init")} to create a ${X("components.json")} file.`);await Mn(s,n,r),me(`${V.green("Success!")} Component installation completed.`)}catch(r){he(r)}});async function Mn(e,t,r){r.proxy!==void 0&&(ee.env.HTTP_PROXY=r.proxy,T.info(`You are using the provided proxy: ${V.green(r.proxy)}`));let s=await Ze(),n=new Set(r.all?s.map(({name:f})=>f):r.components),i=new Map;for(let f of s)i.set(f.name,f.registryDependencies);if(n===void 0||n.size===0){let f=await We({message:`Which ${X("components")} would you like to install?`,maxItems:10,options:s.map(({name:u,dependencies:d,registryDependencies:h})=>{let k=[...r.nodep?[]:d,...h];return{label:u,value:u,hint:k.length?`also installs: ${k.join(", ")}`:void 0}})});z(f)&&(R("Operation cancelled."),ee.exit(0)),n=new Set(f)}else{let f=xe(Array.from(n));T.step(`Components to install:
${V.gray(f)}`)}for(let f of n)i.get(f)?.forEach(d=>n.add(d));let a=await je(s,Array.from(n),!1),l=await Qe(t,a);l.length===0&&(R("Selected components not found."),ee.exit(0));let c=[],m=r.path?ne.resolve(e,r.path):void 0;for(let f of l){if(n.has(f.name)===!1)continue;let u=Re(t,f,m);if(u===null)continue;f.files.some(h=>st(ne.resolve(u,f.name,h.name)))&&c.push(f.name)}if(r.overwrite===!1&&c.length>0){let f=xe(c);T.warn(`The following components ${V.bold.yellow("already exists")}:
${V.gray(f)}`);let u=await Y({message:`Would you like to ${V.bold.red("overwrite")} all existing components?`,active:"Yes, overwrite everything",inactive:"No, let me decide individually",initialValue:!1});z(u)&&(R("Operation cancelled."),ee.exit(0)),r.overwrite=u}if(r.yes===!1){let f=await Y({message:`Ready to install ${X("components")}${r.nodep?"?":` and ${X("dependencies")}?`}`,initialValue:!0});(z(f)||f===!1)&&(R("Operation cancelled."),ee.exit(0))}let v=new Set,p=new Set,$=[];for(let f of l){let u=Re(t,f,m);if(u===null)continue;st(u)||await jt.mkdir(u,{recursive:!0});let d=ne.relative(ee.cwd(),ne.resolve(u,f.name));if(!r.overwrite&&c.includes(f.name)&&n.has(f.name)){T.warn(`Component ${X(f.name)} already exists at ${V.gray(d)}`);let h=await Y({message:`Would you like to ${V.bold.red("overwrite")} your existing ${X(f.name)} component?`});if(z(h)&&(R("Operation cancelled."),ee.exit(0)),h===!1)continue}r.nodep?f.dependencies.forEach(h=>v.add(h)):f.dependencies.forEach(h=>p.add(h)),$.push({title:`Installing ${X(f.name)}`,async task(){for(let h of f.files){let k=ne.resolve(u,f.name),C=ne.resolve(u,f.name,h.name),y=tt(h.content,t);st(k)||await jt.mkdir(k,{recursive:!0}),await jt.writeFile(C,y)}return`${X(f.name)} installed at ${V.gray(d)}`}})}if($.push({title:"Installing package dependencies",enabled:p.size>0,async task(){let f=await Q(e);return await Fn(f,["add",...p],{cwd:e}),"Dependencies installed"}}),await ye($),r.nodep){let f=xe([...v],7);T.warn(`Components have been installed ${V.bold.red("without")} the following ${X("dependencies")}:
${V.gray(f)}`)}}import{existsSync as at,promises as _e}from"fs";import we from"path";import Ut from"process";import q from"chalk";import{Command as pi}from"commander";import{execa as fi}from"execa";var rt=`import { type ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";
import { cubicOut } from "svelte/easing";
import type { TransitionConfig } from "svelte/transition";

export function cn(...inputs: ClassValue[]) {
	return twMerge(clsx(inputs));
}

type FlyAndScaleParams = {
	y?: number;
	x?: number;
	start?: number;
	duration?: number;
};

export const flyAndScale = (
	node: Element,
	params: FlyAndScaleParams = { y: -8, x: 0, start: 0.95, duration: 150 }
): TransitionConfig => {
	const style = getComputedStyle(node);
	const transform = style.transform === "none" ? "" : style.transform;

	const scaleConversion = (
		valueA: number,
		scaleA: [number, number],
		scaleB: [number, number]
	) => {
		const [minA, maxA] = scaleA;
		const [minB, maxB] = scaleB;

		const percentage = (valueA - minA) / (maxA - minA);
		const valueB = percentage * (maxB - minB) + minB;

		return valueB;
	};

	const styleToString = (
		style: Record<string, number | string | undefined>
	): string => {
		return Object.keys(style).reduce((str, key) => {
			if (style[key] === undefined) return str;
			return str + \`\${key}:\${style[key]};\`;
		}, "");
	};

	return {
		duration: params.duration ?? 200,
		delay: 0,
		css: (t) => {
			const y = scaleConversion(t, [0, 1], [params.y ?? 5, 0]);
			const x = scaleConversion(t, [0, 1], [params.x ?? 0, 0]);
			const scale = scaleConversion(t, [0, 1], [params.start ?? 0.95, 1]);

			return styleToString({
				transform: \`\${transform} translate3d(\${x}px, \${y}px, 0) scale(\${scale})\`,
				opacity: t
			});
		},
		easing: cubicOut
	};
};`,nt=`import { clsx } from "clsx";
import { twMerge } from "tailwind-merge";
import { cubicOut } from "svelte/easing";

export function cn(...inputs) {
	return twMerge(clsx(inputs));
}

export const flyAndScale = (
	node,
	params = { y: -8, x: 0, start: 0.95, duration: 150 }
) => {
	const style = getComputedStyle(node);
	const transform = style.transform === "none" ? "" : style.transform;

	const scaleConversion = (valueA, scaleA, scaleB) => {
		const [minA, maxA] = scaleA;
		const [minB, maxB] = scaleB;

		const percentage = (valueA - minA) / (maxA - minA);
		const valueB = percentage * (maxB - minB) + minB;

		return valueB;
	};

	const styleToString = (style) => {
		return Object.keys(style).reduce((str, key) => {
			if (style[key] === undefined) return str;
			return str + \`\${key}:\${style[key]};\`;
		}, "");
	};

	return {
		duration: params.duration ?? 200,
		delay: 0,
		css: (t) => {
			const y = scaleConversion(t, [0, 1], [params.y ?? 5, 0]);
			const x = scaleConversion(t, [0, 1], [params.x ?? 0, 0]);
			const scale = scaleConversion(t, [0, 1], [params.start ?? 0.95, 1]);

			return styleToString({
				transform: \`\${transform} translate3d(\${x}px, \${y}px, 0) scale(\${scale})\`,
				opacity: t
			});
		},
		easing: cubicOut
	};
};`,Bn=`import { fontFamily } from "tailwindcss/defaultTheme";

/** @type {import('tailwindcss').Config} */
const config = {`,Un=`import { fontFamily } from "tailwindcss/defaultTheme";
import type { Config } from "tailwindcss";

const config: Config = {`,Ms=`
	darkMode: ["class"],
	content: ["./src/**/*.{html,js,svelte,ts}"],
	safelist: ["dark"],
	theme: {
		container: {
			center: true,
			padding: "2rem",
			screens: {
				"2xl": "1400px"
			}
		},
		extend: {
			colors: {
				border: "hsl(var(--border) / <alpha-value>)",
				input: "hsl(var(--input) / <alpha-value>)",
				ring: "hsl(var(--ring) / <alpha-value>)",
				background: "hsl(var(--background) / <alpha-value>)",
				foreground: "hsl(var(--foreground) / <alpha-value>)",
				primary: {
					DEFAULT: "hsl(var(--primary) / <alpha-value>)",
					foreground: "hsl(var(--primary-foreground) / <alpha-value>)"
				},
				secondary: {
					DEFAULT: "hsl(var(--secondary) / <alpha-value>)",
					foreground: "hsl(var(--secondary-foreground) / <alpha-value>)"
				},
				destructive: {
					DEFAULT: "hsl(var(--destructive) / <alpha-value>)",
					foreground: "hsl(var(--destructive-foreground) / <alpha-value>)"
				},
				muted: {
					DEFAULT: "hsl(var(--muted) / <alpha-value>)",
					foreground: "hsl(var(--muted-foreground) / <alpha-value>)"
				},
				accent: {
					DEFAULT: "hsl(var(--accent) / <alpha-value>)",
					foreground: "hsl(var(--accent-foreground) / <alpha-value>)"
				},
				popover: {
					DEFAULT: "hsl(var(--popover) / <alpha-value>)",
					foreground: "hsl(var(--popover-foreground) / <alpha-value>)"
				},
				card: {
					DEFAULT: "hsl(var(--card) / <alpha-value>)",
					foreground: "hsl(var(--card-foreground) / <alpha-value>)"
				}
			},
			borderRadius: {
				lg: "var(--radius)",
				md: "calc(var(--radius) - 2px)",
				sm: "calc(var(--radius) - 4px)"
			},
			fontFamily: {
				sans: [...fontFamily.sans]
			}
		}
	},
};

export default config;
`,Bs={TS:Un+Ms,JS:Bn+Ms};var Bt=zt(Hs(),1);import Mt from"fs";import be from"path";var oi=["app.css","app.pcss","app.postcss","main.css","main.pcss","main.postcss","globals.css","globals.pcss","globals.postcss"],ci=["tailwind.config.js","tailwind.config.cjs","tailwind.config.mjs","tailwind.config.ts"],li=["node_modules",".git",".svelte-kit"];function Ys(e,t){let r,s,n=ui(e);for(let i of n){let a=be.parse(i).base;s===void 0&&oi.includes(a)&&(s=t?.relative?be.relative(e,i):i),r===void 0&&ci.includes(a)&&(r=t?.relative?be.relative(e,i):i)}return{tailwindPath:r,cssPath:s}}function ui(e){return Zs(e,[])}function Zs(e,t){let r=[],s=Mt.readdirSync(e,{withFileTypes:!0}),n=be.join(e,".gitignore");if(Mt.existsSync(n)){let i=Mt.readFileSync(n,{encoding:"utf8"}),a=(0,Bt.default)().add(i);t.push({dirPath:e,ig:a})}for(let i of s){let a=be.join(e,i.name);li.some(c=>e.includes(c))||t.some(c=>{let m=be.relative(c.dirPath,a);return Bt.default.isPathValid(m)===!1?!1:c.ig.ignores(m)})||(i.isFile()&&r.push(a),i.isDirectory()&&r.push(...Zs(a,t)))}return r}var di=["tailwind-variants","clsx","tailwind-merge"],J=(...e)=>q.bold.cyan(...e),Qs=new pi().command("init").description("initialize your project and install dependencies").option("-c, --cwd <cwd>","the working directory. defaults to the current directory.",Ut.cwd()).action(async e=>{$e();let t=we.resolve(e.cwd);try{if(!at(t))throw L(`The path ${q.cyan(t)} does not exist. Please try again.`);let r=await ge(t),s=await mi(t,r);await yi(t,s),me(`${q.green("Success!")} Project initialization completed.`)}catch(r){he(r)}});async function mi(e,t){await Je(e);let r=await Ls(),s=await Ns(),n=Ys(e,{relative:!0}),i=await Y({message:`Would you like to use ${J("TypeScript")}? ${q.gray("(recommended)")}`,initialValue:t?.typescript??Ts});z(i)&&(R("Operation cancelled."),Ut.exit(0));let a=i?"tsconfig.json":"jsconfig.json";Ye(e,a);let l=p=>{let $=Ye(e,a);if(Oe(p,$)===void 0)return`"${q.bold(p)}" does not use an existing path alias defined in your ${q.bold(a)}. See: ${q.underline("https://www.shadcn-svelte.com/docs/installation/manual#configure-path-aliases")}`},c=await vs({style:()=>At({message:`Which ${J("style")} would you like to use?`,initialValue:t?.style??Cs,options:r.map(p=>({label:p.label,value:p.name}))}),tailwindBaseColor:()=>At({message:`Which ${J("base color")} would you like to use?`,initialValue:t?.tailwind.baseColor??As,options:s.map(p=>({label:p.label,value:p.name}))}),tailwindCss:()=>Te({message:`Where is your ${J("global CSS")} file? ${q.gray("(this file will be overwritten)")}`,initialValue:t?.tailwind.css??n.cssPath??Ot,placeholder:n.cssPath??Ot,validate:p=>{if(!(p&&at(we.resolve(e,p))))return`"${q.bold(p)}" does not exist. Please enter a valid path.`}}),tailwindConfig:()=>Te({message:`Where is your ${J("Tailwind config")} located? ${q.gray("(this file will be overwritten)")}`,initialValue:t?.tailwind.config??n.tailwindPath??It,placeholder:n.tailwindPath??It,validate:p=>{if(!(p&&at(we.resolve(e,p))))return`"${q.bold(p)}" does not exist. Please enter a valid path.`}}),components:()=>Te({message:`Configure the import alias for ${J("components")}:`,initialValue:t?.aliases.components??Tt,placeholder:Tt,validate:l}),utils:({results:{components:p}})=>Te({message:`Configure the import alias for ${J("utils")}:`,initialValue:t?.aliases.utils??`${p?.split("/").slice(0,-1).join("/")}/utils`??St,placeholder:St,validate:l})},{onCancel:()=>{R("Operation cancelled."),Ut.exit(0)}}),m=D(Pe,{$schema:"https://shadcn-svelte.com/schema.json",style:c.style,typescript:i,tailwind:{config:c.tailwindConfig,css:c.tailwindCss,baseColor:c.tailwindBaseColor},aliases:{utils:c.utils,components:c.components}});if(m.tailwind.config.endsWith(".cjs")){T.info(`Your tailwind config has been renamed to ${J("tailwind.config.js")}.`),await _e.unlink(m.tailwind.config).catch(()=>null);let p=m.tailwind.config.replace(".cjs",".js");m.tailwind.config=p}return await Pt(e,m)}async function yi(e,t){await ye([{title:"Creating config file",async task(){let i=we.resolve(e,"components.json"),a=D(Pe,t);return await _e.writeFile(i,JSON.stringify(a,null,"	"),"utf8"),`Config file ${J("components.json")} created`}},{title:"Initializing project",async task(){for(let[p,$]of Object.entries(t.resolvedPaths)){let f=we.extname($)?we.dirname($):$;p==="utils"&&$.endsWith("/utils")&&(f=f.replace(/\/utils$/,"")),!at(f)&&p!=="utils"&&await _e.mkdir(f,{recursive:!0})}let{TS:i,JS:a}=Bs,l=t.resolvedPaths.tailwindConfig.endsWith(".ts")?i:a;await _e.writeFile(t.resolvedPaths.tailwindConfig,l,"utf8");let c=await Ds(t.tailwind.baseColor);c&&await _e.writeFile(t.resolvedPaths.tailwindCss,c.cssVarsTemplate,"utf8");let m=t.resolvedPaths.utils+(t.typescript?".ts":".js"),v=t.typescript?rt:nt;return await _e.writeFile(m,v,"utf8"),"Project initialized"}},{title:"Installing dependencies",async task(){let i=await Q(e);return await fi(i,["add",...di],{cwd:e}),"Dependencies installed"}}])}import{existsSync as Le,promises as Ee}from"fs";import te from"path";import Ne from"process";import F from"chalk";import{Command as hi}from"commander";import{execa as gi}from"execa";var ie=e=>F.bold.cyan(e),vi=O({all:B(),components:W(M(x())),cwd:x(),proxy:W(x()),yes:B()}),er=new hi().command("update").description("update components in your project").argument("[components...]","name of components").option("-a, --all","update all existing components.",!1).option("-y, --yes","skip confirmation prompt.",!1).option("--proxy <proxy>","fetch components from registry using a proxy.",ve()).option("-c, --cwd <cwd>","the working directory. defaults to the current directory.",Ne.cwd()).action(async(e,t)=>{$e();try{let r=D(vi,{components:e,...t}),s=te.resolve(r.cwd);if(!Le(s))throw L(`The path ${F.cyan(s)} does not exist. Please try again.`);let n=await ge(s);if(!n)throw L(`Configuration file is missing. Please run ${F.green("init")} to create a ${ie("components.json")} file.`);await $i(s,n,r),hs(`This action ${F.underline("does not")} update your ${ie("dependencies")} to their ${F.bold("latest")} versions.

Consider updating them as well.`),me(`${F.green("Success!")} Component update completed.`)}catch(r){he(r)}});async function $i(e,t,r){r.proxy!==void 0&&(Ne.env.HTTP_PROXY=r.proxy,T.info(`You are using the provided proxy: ${F.green(r.proxy)}`));let s=r.components,n=await Ze(),i=te.resolve(t.resolvedPaths.components,"ui");if(!Le(i))throw L(`Component directory ${F.cyan(i)} does not exist.`);let a=[],l=await Ee.readdir(i,{withFileTypes:!0});for(let u of l)if(u.isDirectory()){let d=n.find(h=>h.name===u.name);d&&a.push(d)}a.push({name:"utils",type:"components:ui",files:[],dependencies:[],registryDependencies:[]});let c=r.all?a:[];if(c.length===0&&s!==void 0&&(c=a.filter(u=>s.includes(u.name))),c.length===0){let u=await We({message:"Which components would you like to update?",maxItems:10,options:a.map(d=>({label:d.name,value:d,hint:d.registryDependencies.length?`also updates: ${d.registryDependencies.join(", ")}`:void 0}))});z(u)&&(R("Operation cancelled."),Ne.exit(0)),c=u}else{let u=xe(c.map(({name:d})=>d));T.step(`Components to update:
${F.gray(u)}`)}if(r.yes===!1){let u=await Y({message:`Ready to update ${ie("components")}? ${F.gray("(Make sure you have committed your changes before proceeding!)")}`,initialValue:!0});(z(u)||u===!1)&&(R("Operation cancelled."),Ne.exit(0))}if(c.find(u=>u.name==="utils")){let u=t.typescript?".ts":".js",d=t.resolvedPaths.utils+u;if(!Le(d))throw L(`Failed to find ${ie("utils")} at ${F.cyan(d)}`);await Ee.writeFile(d,t.typescript?rt:nt)}let m=await je(n,c.map(u=>u.name)),v=(await Qe(t,m)).sort((u,d)=>u.name.localeCompare(d.name)),p={},$=new Set,f=[];for(let u of v){let d=Re(t,u);d&&(u.dependencies.forEach(h=>$.add(h)),f.push({title:`Updating ${ie(u.name)}`,async task(){Le(d)||await Ee.mkdir(d,{recursive:!0});let h=te.resolve(d,u.name);Le(h)||await Ee.mkdir(h,{recursive:!0});for(let g of u.files){let P=te.resolve(d,u.name,g.name),N=tt(g.content,t);await Ee.writeFile(P,N)}let k=await Ee.readdir(h),C=u.files.map(g=>g.name),y=k.filter(g=>!C.includes(g)).map(g=>te.resolve(d,u.name,g));y.length>0&&(p[u.name]=y);let w=te.relative(Ne.cwd(),te.resolve(d,u.name));return`${ie(u.name)} updated at ${F.gray(w)}`}}))}f.push({title:"Installing package dependencies",enabled:$.size>0,async task(){let u=await Q(e);return await gi(u,["add",...$],{cwd:e}),"Dependencies installed"}}),await ye(f);for(let[u,d]of Object.entries(p))T.warn(`The ${ie(u)} component does not use the following files:
${d.map(h=>F.white(`- ${F.gray(te.relative(e,h))}`)).join(`
`)}`);Object.keys(p).length>0&&T.message(F.bold("You may want to delete them."))}ke.on("SIGINT",()=>ke.exit(0));ke.on("SIGTERM",()=>ke.exit(0));var sr=ke.versions.node,bi=Number.parseInt(sr.split(".")[0],10),tr=18;bi<tr&&(console.error(`Node.js v${sr} is out of date and unsupported!`),console.error(`Please use Node.js v${tr} or higher.`),ke.exit(1));async function _i(){console.clear();let e=Ke(),t=new xi().name("shadcn-svelte").description("Add shadcn-svelte components to your project").version(e.version||"0.0.0","-v, --version","display the version number");t.addCommand(Qs).addCommand(Vs).addCommand(er),t.parse()}_i();
